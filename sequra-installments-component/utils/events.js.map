{"version":3,"file":"events.js","sourceRoot":"","sources":["../src/utils/events.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,OAAO,EAAC,MAAM,aAAa,CAAC;AAepC,MAAM,CAAC,KAAK,UAAU,aAAa,CAAC,SAAkB,EAAE,KAAY;IAClE,MAAM,IAAI,GAAgB;QACxB,OAAO,EAAE,KAAK,CAAC,OAAO;QACtB,IAAI,EAAE,KAAK,CAAC,IAAI;QAChB,kBAAkB,EAAE,KAAK,CAAC,SAAS,CAAC,gBAAgB;QACpD,aAAa,EAAE,KAAK,CAAC,SAAS;KAC/B,CAAC;IAEF,IAAI,SAAS,EAAE,CAAC;QACd,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,IAAI,CAAC,CAAC;QAC7D,OAAO;IACT,CAAC;IAED,IAAI,CAAC;QACH,MAAM,KAAK,CAAC,GAAG,OAAO,SAAS,EAAE;YAC/B,MAAM,EAAE,MAAM;YACd,WAAW,EAAE,aAAa;YAC1B,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;YACD,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;SAC3B,CAAC,CAAC;IACL,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;IAC5C,CAAC;AACH,CAAC","sourcesContent":["import {CreditAgreement} from '../types';\nimport {API_URL} from './constants';\n\ntype Input = {\n  agreement: CreditAgreement;\n  context: string;\n  type: string;\n};\n\ntype OutputEvent = {\n  context: string;\n  type: string;\n  selectedInstalment: number;\n  agreementData: CreditAgreement;\n};\n\nexport async function postEventData(debugMode: boolean, input: Input) {\n  const data: OutputEvent = {\n    context: input.context,\n    type: input.type,\n    selectedInstalment: input.agreement.instalment_count,\n    agreementData: input.agreement,\n  };\n\n  if (debugMode) {\n    console.log('[Debug Mode seQura]Posting event data: ', data);\n    return;\n  }\n\n  try {\n    await fetch(`${API_URL}/events`, {\n      method: 'POST',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n  } catch (error) {\n    console.log('seQura - failed post event');\n  }\n}\n"]}